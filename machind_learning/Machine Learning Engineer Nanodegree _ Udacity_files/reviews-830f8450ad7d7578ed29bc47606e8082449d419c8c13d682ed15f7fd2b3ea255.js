!function(){"use strict";function a(a){for(var e='<span class="star yellow"></span>',i='<span class="star"></span>',n="",t=0;a>t;t++)n+=e;for(var r=0;5-a>r;r++)n+=i;return n}function e(a){var e=new Date(a),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.getDate(),t=i[e.getMonth()],r=e.getFullYear(),s=t+" "+n+", "+r;return'<div class="student-date">'+s+"</div>"}function i(a){var e=a.nd_avg_rating,i=Math.round(e/5*100)+"%";$(".reviews-avg-rating").append(e.toFixed(1)),$(".reviews-avg-stars .rating, .nd_stars .rating").css("width",i)}function n(a){var e=a.stats,i=0;e.sort(function(a,e){return e.rating-a.rating}),$.each(e,function(a){var n=e[a].percentage.toFixed(1),t=e[a].rating,r=e[a].count,s="star";1!==t&&(s+="s"),i+=r;var d='<div class="review-bar-wrapper"><div class="left-label">'+t+" "+s+'</div><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="'+n+'" aria-valuemin="0" aria-valuemax="100" style="width: '+n+'%;">'+r+'</div></div><div class="right-label">'+n+"%</div></div>";$(".reviews-overview").append(d)}),$(".reviews-total-count, .nd_stars_numReviews").append("("+i+")")}function t(i){var n=i.reviews;$.each(n,function(i){var t=n[i].updated_at,r=e(t),s=n[i].rated_by.name,d=a(n[i].rating),o=n[i].student_comment,v=n[i].user_key,c='<a class="review-link" href="#review-'+v+'"><div class="review-card"><div class="review-card-details"><div class="review-card-head"><div class="student-name">'+s+'</div><div class="student-stars">'+d+'</div></div><div class="review-card-body"><p>'+o+"</p>"+r+"</div></div></div></a>";$(".reviews-list").append(c);var l='<div class="remodal reviews_modal" data-remodal-id="review-'+v+'"><button data-remodal-action="close" class="remodal-close"></button><div class="review-card-head"><div class="student-name">'+s+'</div><div class="student-stars">'+d+'</div></div><div class="review-card-body"><p>'+o+"</p>"+r+"</div></div>";$(".reviews-modals").append(l),$("[data-remodal-id=review-"+v+"]").remodal()})}function r(a){l=a.page,u=a.next_page,p=l-1;var e=a.total_pages;p>0?$(".pagination-contain .prevPage").show():$(".pagination-contain .prevPage").hide(),l===e?$(".pagination-contain .nextPage").hide():$(".pagination-contain .nextPage").show()}function s(a){$.ajax({dataType:"json",url:c+a,success:function(a){$(".reviews-list").html(""),t(a),r(a)},error:function(){$("#reviews").hide()}})}var d=$("#reviews").data("node-key"),o=5,v=1,c="https://rocky-basin-6876.herokuapp.com/api/v1/reviews?node="+d+"&limit="+o+"&rating_min="+v+"&page=",l=1,u=2,p=0;$(document).ready(function(){$(".reviews-list").on("click",".review-card",function(){analytics.track("Rating Clicked",{category:"Nanodegree Rating Card",label:"Nanodegree Rating Card - "+d,value:$(this).find(".student-stars .star.yellow").length,sku:d})}),$(".pagination-contain .nextPage").click(function(a){s(u),a.preventDefault()}),$(".pagination-contain .prevPage").click(function(a){s(p),a.preventDefault()}),$.ajax({dataType:"json",url:c+l,beforeSend:function(){$(".loading").show(),$(".reviews-avg, .pagination-contain").hide()},complete:function(){$(".loading").hide(),$(".ready, .reviews-avg, .pagination-contain").show()},success:function(a){i(a),n(a),t(a),r(a)},error:function(){$("#reviews, .nd_stats > li:first-child").hide()}})})}();